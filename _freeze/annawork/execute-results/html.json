{
  "hash": "12558b35559ca08d0117392aa4487cf0",
  "result": {
    "markdown": "---\ntitle: \"Anna work\"\neditor: visual\n---\n\n\n# Introduction \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# plot 1\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in system(\"timedatectl\", intern = TRUE): running command 'timedatectl'\nhad status 1\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   1.0.1 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.5.0 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidyr)\nlibrary(gghighlight)\nlibrary(directlabels)\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: timechange\n\nAttaching package: 'lubridate'\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nbreed_traits <- read_csv(\"data/breed_traits.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 195 Columns: 17\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (3): Breed, Coat Type, Coat Length\ndbl (14): Affectionate With Family, Good With Young Children, Good With Othe...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ntrait_description <- read_csv(\"data/trait_description.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 16 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): Trait, Trait_1, Trait_5, Description\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nbreed_rank_all <- read_csv(\"data/breed_rank.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 195 Columns: 11\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): Breed, links, Image\ndbl (8): 2013 Rank, 2014 Rank, 2015 Rank, 2016 Rank, 2017 Rank, 2018 Rank, 2...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbreed_traits <- breed_traits %>%\n  mutate(breed = Breed) %>%\n  select(-c(Breed))\n\ncomb_df <- bind_cols(breed_traits, breed_rank_all) %>% select(-c(breed)) %>% relocate(Breed)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nt20 <- breed_rank_all %>%\n  tidyr::drop_na() %>%\n  mutate(popsum = rowSums(across(where(is.numeric)), na.rm=TRUE)) %>%\n  arrange(popsum) %>%\n  head(20)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncomb_df20 <- comb_df %>%\n  filter(Breed %in% t20$Breed) %>%\n  pivot_longer(cols = c(`2013 Rank`:`2020 Rank`), names_to = \"Year\",  values_to = \"rank\")%>% mutate(Year = as.numeric(str_replace_all(Year, \" Rank\", \"\")), rank = as.numeric(rank)) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncomb_df20 %>%\n  group_by(Breed) %>%\n  mutate(range = (max(rank)- min(rank)), .groups  = \"drop\") %>%\n  ggplot(aes(x = Year, y = rank, color = Breed)) + \n  scale_x_continuous(limits = c(2013,2022), labels = c(2013:2022), breaks = c(2013:2022)) + \n  geom_line(show.legend = FALSE) + \n  geom_dl(aes(label = Breed), method = list(\"last.points\", cex = 0.65)) +\n  theme_minimal() +\n  scale_y_reverse() +\n  gghighlight(max(range) >6, use_direct_label = FALSE, unhighlighted_params = list(linewidth = 0.5, colour = alpha(\"slategray\", 0.7))) +\n  labs(title = \"Popularity Rankings of 20 Top Dog Breeds Over Time\", x = \"Year\", y = \"Rank\") + \n  theme(panel.grid.minor = element_blank(), panel.grid.major = element_blank())\n```\n\n::: {.cell-output-display}\n![](annawork_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\"\n",
    "supporting": [
      "annawork_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}